{"ast":null,"code":"import _slicedToArray from \"/Users/federicalora/Desktop/PomodoroTimer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/federicalora/Desktop/PomodoroTimer/src/components/Timer.js\";\nimport React from \"react\";\nimport { useContext, useState, useEffect, useRef } from \"react\";\nimport SettingsContext from \"../context/SettingsContext\"; //----- CircularProgressbar -----\n//documentation: https://www.npmjs.com/package/react-circular-progressbar\n\nimport { CircularProgressbarWithChildren, buildStyles } from \"react-circular-progressbar\";\nimport \"react-circular-progressbar/dist/styles.css\"; //----- Button components -----\n\nimport PauseButton from \"./PauseButton\";\nimport PlayButton from \"./PlayButton\";\nimport SettingsButton from \"./SettingsButtton\";\n\nfunction Timer() {\n  var settingsInfo = useContext(SettingsContext);\n\n  var _useState = useState(true),\n      _useState2 = _slicedToArray(_useState, 2),\n      isPaused = _useState2[0],\n      setIsPaused = _useState2[1];\n\n  var _useState3 = useState(\"work\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      mode = _useState4[0],\n      setMode = _useState4[1]; // work / break / null\n\n\n  var _useState5 = useState(0),\n      _useState6 = _slicedToArray(_useState5, 2),\n      secondsLeft = _useState6[0],\n      setSecondsLeft = _useState6[1];\n\n  var _useState7 = useState(0),\n      _useState8 = _slicedToArray(_useState7, 2),\n      count = _useState8[0],\n      setCount = _useState8[1]; // Why do I use refs? To not have the values re-rendered when they change.\n\n\n  var secondsLeftRef = useRef(secondsLeft);\n  var isPausedRef = useRef(isPaused);\n  var modeRef = useRef(mode);\n\n  function tick() {\n    secondsLeftRef.current = secondsLeftRef.current - 1;\n    setSecondsLeft(secondsLeftRef.current);\n  }\n\n  useEffect(function () {\n    // function to change modes\n    function switchMode() {\n      var nextMode = modeRef.current === \"work\" ? \"break\" : \"work\";\n      var nextSeconds = (nextMode === \"work\" ? settingsInfo.workMinutes : settingsInfo.breakMinutes) * 60;\n      setMode(nextMode);\n      modeRef.current = nextMode;\n      setSecondsLeft(nextSeconds);\n      secondsLeftRef.current = nextSeconds;\n    }\n\n    secondsLeftRef.current = settingsInfo.workMinutes * 60;\n    setSecondsLeft(secondsLeftRef.current);\n    var interval = setInterval(function () {\n      if (isPausedRef.current) {\n        return; //nothing\n      }\n\n      if (secondsLeftRef.current === 0) {\n        // when timer goes to 0, change mode calling the switchMode function & update count variable\n        count = count + 1;\n        return switchMode() & setCount(count);\n      }\n\n      tick();\n      return interval;\n    }, 100);\n  }, [settingsInfo]); //--------------- timer mechanism -----------\n  // PERCENTAGE\n\n  var totalSeconds = mode === \"work\" ? settingsInfo.workMinutes * 60 : settingsInfo.breakMinutes * 60;\n  var percentage = Math.round(secondsLeft / totalSeconds * 100); // MINUTES\n\n  var minutes = Math.floor(secondsLeft / 60);\n  var seconds = secondsLeft % 60;\n  if (seconds < 10) seconds = \"0\" + seconds;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"timerContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"header\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }\n  }, \"Federica's omodoro\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"settingsButtonContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(SettingsButton, {\n    onClick: function onClick() {\n      return settingsInfo.setShowSettings(true);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"progressBarContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(CircularProgressbarWithChildren, {\n    value: percentage,\n    text: minutes + \":\" + seconds,\n    styles: buildStyles({\n      textColor: mode === \"work\" ? \"rgba(173, 216, 230, 0.474)\" : \"white\",\n      pathColor: mode === \"work\" ? \"rgba(173, 216, 230, 0.474)\" : \"white\",\n      trailColor: \"#e0e8f19e\",\n      strokeLinecap: 'butt',\n      textSize: 23\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }\n  }, mode === 'work' ? /*#__PURE__*/React.createElement(\"h2\", {\n    id: \"modeTitleWork\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 16\n    }\n  }, mode) : /*#__PURE__*/React.createElement(\"h2\", {\n    id: \"modeTitleBreak\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 16\n    }\n  }, \" \", mode))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"containerButtonsTimer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }\n  }, isPaused ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"playButtonContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(PlayButton, {\n    onClick: function onClick() {\n      setIsPaused(false);\n      isPausedRef.current = false;\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 13\n    }\n  })) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"pauseButtonContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(PauseButton, {\n    onClick: function onClick() {\n      setIsPaused(true);\n      isPausedRef.current = true;\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 13\n    }\n  }))));\n}\n\nexport default Timer;","map":{"version":3,"names":["React","useContext","useState","useEffect","useRef","SettingsContext","CircularProgressbarWithChildren","buildStyles","PauseButton","PlayButton","SettingsButton","Timer","settingsInfo","isPaused","setIsPaused","mode","setMode","secondsLeft","setSecondsLeft","count","setCount","secondsLeftRef","isPausedRef","modeRef","tick","current","switchMode","nextMode","nextSeconds","workMinutes","breakMinutes","interval","setInterval","totalSeconds","percentage","Math","round","minutes","floor","seconds","setShowSettings","textColor","pathColor","trailColor","strokeLinecap","textSize"],"sources":["/Users/federicalora/Desktop/PomodoroTimer/src/components/Timer.js"],"sourcesContent":["import React from \"react\";\nimport { useContext, useState, useEffect, useRef } from \"react\";\nimport SettingsContext from \"../context/SettingsContext\";\n\n//----- CircularProgressbar -----\n//documentation: https://www.npmjs.com/package/react-circular-progressbar\nimport { CircularProgressbarWithChildren, buildStyles } from \"react-circular-progressbar\";\nimport \"react-circular-progressbar/dist/styles.css\";\n\n//----- Button components -----\nimport PauseButton from \"./PauseButton\";\nimport PlayButton from \"./PlayButton\";\nimport SettingsButton from \"./SettingsButtton\";\n\nfunction Timer() {\n  const settingsInfo = useContext(SettingsContext);\n  const [isPaused, setIsPaused] = useState(true);\n  const [mode, setMode] = useState(\"work\"); // work / break / null\n  const [secondsLeft, setSecondsLeft] = useState(0);\n  var [count, setCount] = useState(0);\n\n  // Why do I use refs? To not have the values re-rendered when they change.\n  const secondsLeftRef = useRef(secondsLeft);\n  const isPausedRef = useRef(isPaused);\n  const modeRef = useRef(mode);\n\n  function tick() {\n    secondsLeftRef.current = secondsLeftRef.current - 1;\n    setSecondsLeft(secondsLeftRef.current);\n  }\n\n  useEffect(() => {\n    // function to change modes\n    function switchMode() {\n      const nextMode = modeRef.current === \"work\" ? \"break\" : \"work\";\n      const nextSeconds =\n        (nextMode === \"work\"\n          ? settingsInfo.workMinutes\n          : settingsInfo.breakMinutes) * 60;\n      setMode(nextMode);\n      modeRef.current = nextMode;\n      setSecondsLeft(nextSeconds);\n      secondsLeftRef.current = nextSeconds;\n    }\n    secondsLeftRef.current = settingsInfo.workMinutes * 60;\n    setSecondsLeft(secondsLeftRef.current);\n\n    const interval = setInterval(() => {\n      if (isPausedRef.current) {\n        return; //nothing\n      }\n      if (secondsLeftRef.current === 0) {\n        // when timer goes to 0, change mode calling the switchMode function & update count variable\n        count = count + 1;\n        return switchMode() & setCount(count);\n      }\n      tick();\n      return interval;\n    }, 100);\n  }, [settingsInfo]);\n\n  //--------------- timer mechanism -----------\n\n  // PERCENTAGE\n  const totalSeconds =\n    mode === \"work\"\n      ? settingsInfo.workMinutes * 60\n      : settingsInfo.breakMinutes * 60;\n  const percentage = Math.round((secondsLeft / totalSeconds) * 100);\n\n  // MINUTES\n  const minutes = Math.floor(secondsLeft / 60);\n  let seconds = secondsLeft % 60;\n  if (seconds < 10) seconds = \"0\" + seconds;\n\n  return (\n    <div className=\"timerContainer\">\n      {/* <h2> you have done:{count} </h2> */}\n\n      {/* ---- Settings button component ---- */}\n      <header>\n        <h1>Federica's omodoro</h1>\n        <div className=\"settingsButtonContainer\">\n          <SettingsButton onClick={() => settingsInfo.setShowSettings(true)} />\n        </div>\n      </header>\n\n\n      {/* ---- Progressbar ---- */}\n      <div className=\"progressBarContainer\">\n        <CircularProgressbarWithChildren\n          value={percentage}\n          text={minutes + \":\" + seconds}\n          styles={buildStyles({\n            textColor: mode === \"work\" ? \"rgba(173, 216, 230, 0.474)\" : \"white\",\n            pathColor: mode === \"work\" ? \"rgba(173, 216, 230, 0.474)\" : \"white\",\n            trailColor: \"#e0e8f19e\",\n            strokeLinecap: 'butt',\n            textSize: 23\n          })}>\n\n          {mode === 'work'\n            ? (<h2 id=\"modeTitleWork\">{mode}</h2>)\n            : (<h2 id=\"modeTitleBreak\"> {mode}</h2>)\n          }\n\n\n        </CircularProgressbarWithChildren>\n      </div>\n      {/* ---- Play-Pause button component ---- */}\n\n      <div className=\"containerButtonsTimer\">\n\n        {isPaused ? (\n          <div className=\"playButtonContainer\">\n            <PlayButton\n              onClick={() => {\n                setIsPaused(false);\n                isPausedRef.current = false;\n              }}\n            />\n          </div>\n        ) : (\n          <div className=\"pauseButtonContainer\">\n            <PauseButton\n              onClick={() => {\n                setIsPaused(true);\n                isPausedRef.current = true;\n              }}\n            />\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default Timer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}